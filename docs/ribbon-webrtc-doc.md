<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## api

The top level 'api' is what is available to an app after the Citrix WebRTC SDK has been imported.
It contains various top-level functions that pertain to Citrix WebRTC SDK global instance, as well as event emitter methods.

### setup

Initializes the Citrix UC SDK and sets up the WebRTC SDK to run in Citrix proxy mode.

#### Parameters

*   `SDK` **[Object][1]** The WebRTC JS SDK.

#### Examples

```javascript
import citrixClient from '@rbbn/citrix-webrtc-sdk/citrix'


// Setup proxy mode on WebRTC SDK client by passing in the created client.
try {
  await citrixClient.setup(webrtcClient)
} catch (error) {
  // See Throws section and api.errorCodes documentation for list of possible errors.
}
```

*   Throws **[api.CitrixError][2]** Will throw an error with code `INVALID_STATE` if Citrix proxy mode is already setup.
*   Throws **[api.CitrixError][2]** Will throw an error with code `INVALID_PARAM` if provided SDK parameter is invalid.
*   Throws **[api.CitrixError][2]** Will throw an error with code `INVALID_STATE` if active calls are ongoing.
*   Throws **[api.CitrixError][2]** Will throw an error with code `VERSION_MISMATCH` if WebRTC JS SDK and Citrix WebRTC SDK versions mismatch.
*   Throws **[api.CitrixError][2]** Will throw an error with code `CITRIX_SDK_ERROR` if Citrix UC SDK fails to initialize.

Returns **[Promise][3]** Resolves upon successful completion

### teardown

Tears down the Citrix UC SDK and returns the WebRTC JS SDK to non-proxy mode.

#### Examples

```javascript
try {
  citrixClient.teardown()
} catch (error) {
  // See Throws section and api.errorCodes documentation for list of possible errors.
}
```

*   Throws **[api.CitrixError][2]** Will throw an error if active calls are ongoing.

### isSetup

Returns whether proxy mode has been setup or not.

#### Examples

```javascript
log(citrixClient.isSetup())     // false
await citrixClient.setup(webrtcSDK)
log(citrixClient.isSetup())     // true
citrixClient.teardown()
log(citrixClient.isSetup())     // false
```

Returns **[boolean][4]** Returns true if proxy mode is setup, false otherwise.

### getE911Data

Returns E911 data from the client.

Returns **[Object][1]** Client E911 data

### on

Add an event listener for the specified event type. The event is emitted by the SDK instance.

#### Parameters

*   `type` **[string][5]** The event type for which to add the listener. See [api.eventTypes][6] for possible event types
*   `listener` **[Function][7]** The listener for the event type. The parameters of the listener depend on the event type.

#### Examples

```javascript
import citrixClient from '@rbbn/citrix-webrtc-sdk/citrix'

// Listen for events of a specific type emitted by the SDK.
citrixClient.on('dummy:event', function (params) {
   // Handle the event.
})
```

### off

Removes an event listener for the specified event type. The event is emitted by the SDK instance.

#### Parameters

*   `type` **[string][5]** The event type for which to remote the listener.
*   `listener` **[Function][7]** The listener to remove.

### subscribe

Adds a global event listener to SDK instance.

#### Parameters

*   `listener` **[Function][7]** The event listener to add. The parameters are (type, ...args), where args depend on the event type.

### unsubscribe

Removes a global event listener from SDK instance.

#### Parameters

*   `listener` **[Function][7]** The event listener to remove.

### getVersion

Returns the current version of the Citrix WebRTC SDK.

Returns **[string][5]** The Citrix WebRTC SDK version

### errorCodes

Possible error codes for the errors thrown by the Citrix WebRTC SDK.

Each error thrown by the SDK is in the format of [api.CitrixError][8]. These error objects
include a code and message. The codes provide a basic hint as to what the error is as per descriptions below.
The message provides more context about the error encountered.

Type: [Object][1]

#### Properties

*   `CITRIX_SDK_ERROR` **[string][5]** A CITRIX_SDK_ERROR error indicates that the Citrix UC SDK threw an error.
*   `INVALID_PARAM` **[string][5]** An INVALID_PARAM error indicates that an invalid parameter was passed to the API.
*   `INVALID_STATE` **[string][5]** An INVALID_STATE error indicates that SDK is in an invalid state proceed with the operation.
*   `VERSION_MISMATCH` **[string][5]** A VERSION_MISMATCH error indicates that the provided WebRTC SDK version does not match the Citrix WebRTC SDK version.

#### Examples

```javascript
import citrixProxy from '@rbbn/citrix-webrtc-sdk/webrtc.citrix.js'
try {
  await citrixProxy.setup(rbbnWebRTC)
} catch (error) {
  // Error contains a `code` and `message` property.
  const { code, message } = error
  switch (code) {
    case citrixProxy.errorCodes.CITRIX_SDK_ERROR:
      // Handle error originating from the Citrix UC SDK.
    case citrixProxy.errorCodes.INVALID_PARAM:
      // Handle the error with the parameter provided.
    case citrixProxy.errorCodes.INVALID_STATE:
      // Handle an SDK not being in the correct state for the API call.
    case citrixProxy.errorCodes.VERSION_MISMATCH:
      // Handle the two SDK's not being on the same version.
  }
}
```

### CitrixError

The CitrixError object. Provides information about an error that occurred in the Citrix WebRTC SDK.

Type: [Object][1]

#### Properties

*   `code` **[string][5]** One of [api.errorCodes][9]
*   `message` **[string][5]** A human-readable message to describe the error.

### eventTypes

Possible events emitted by the Citrix WebRTC SDK

Type: [Object][1]

#### Properties

*   `CITRIX_CONNECTED` **[string][5]** Citrix Webrtc redirection initiated successfully
*   `CITRIX_DISCONNECTED` **[string][5]** Citrix Webrtc redirection failed to start successfully or failed after connection
*   `CITRIX_E911_DATA_CHANGED` **[string][5]** Client E911 data has changed; updated data should be retrieved via [api.getE911Data][10]

#### Examples

```javascript
import citrixClient from '@rbbn/citrix-webrtc-sdk/citrix'
// Start listening for events
citrixClient.on(citrixClient.eventTypes.CITRIX_E911_DATA_CHANGED, data => {
  // Do something with data
})
```

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: #apicitrixerror

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[6]: #apieventtypes

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[8]: #apicitrixerror

[9]: #apierrorcodes

[10]: #apigete911data
